<div class="fixed inset-0 flex items-center justify-center z-50">
  <div class="absolute inset-0 bg-black opacity-50"></div>

  <div class="bg-white rounded-lg shadow-lg p-6 relative z-10 w-full max-w-3xl">
    <div class="max-h-[75vh] overflow-y-auto rounded-lg pr-2">
      <span class="absolute top-0 right-0 p-4 cursor-pointer" (click)="cerrarModal.emit()">&times;</span>

      <h2 class="text-2xl font-bold mb-4 border-b pb-2 text-left" style="color: #070826;">
        {{ modoVer ? 'Ver' : (proveedorForm.id ? 'Editar' : 'Agregar') }} Proveedor
      </h2>

      <form #proveedorFormNg="ngForm" (ngSubmit)="!modoVer && guardar()" novalidate>
        <fieldset [disabled]="modoVer">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <!-- Nombre empresa -->
            <div class="mb-4">
              <label for="nombreEmpresa" class="block text-sm font-medium mb-1 text-left" style="color: #670305;">
                Nombre de la empresa <span style="color: #670305;">*</span>
              </label>
              <input
                type="text"
                id="nombreEmpresa"
                name="nombreEmpresa"
                maxlength="50"
                pattern="^[A-Za-zÁÉÍÓÚáéíóúñÑ\s]+$"
                [(ngModel)]="proveedorForm.nombre"
                #nombreEmpresaCtrl="ngModel"
                required
                [class.bg-gray-100]="modoVer"
                class="rounded w-full py-2 px-3 focus:outline-none focus:ring-1"
                style="border: 1px solid #070826; color: #670305;"
                placeholder="Ejemplo: Mi Empresa"
              />
              <div *ngIf="nombreEmpresaCtrl.invalid && (nombreEmpresaCtrl.dirty || nombreEmpresaCtrl.touched)" class="text-red-500 text-sm mt-1">
                <div *ngIf="nombreEmpresaCtrl.errors?.['required']">El nombre es obligatorio.</div>
                <div *ngIf="nombreEmpresaCtrl.errors?.['maxlength']">No debe exceder los 50 caracteres.</div>
                <div *ngIf="nombreEmpresaCtrl.errors?.['pattern']">Solo se permiten letras y espacios.</div>
              </div>
            </div>

            <!-- Nombre contacto -->
            <div class="mb-4">
              <label for="nombreContacto" class="block text-sm font-medium mb-1 text-left" style="color: #670305;">
                Nombre del contacto <span style="color: #670305;">*</span>
              </label>
              <input
                type="text"
                id="nombreContacto"
                name="nombreContacto"
                maxlength="50"
                pattern="^[A-Za-zÁÉÍÓÚáéíóúñÑ\s]+$"
                [(ngModel)]="proveedorForm.nombreContacto"
                #nombreContactoCtrl="ngModel"
                required
                [class.bg-gray-100]="modoVer"
                class="rounded w-full py-2 px-3 focus:outline-none focus:ring-1"
                style="border: 1px solid #070826; color: #670305;"
                placeholder="Ejemplo: Juan Pérez"
              />
              <div *ngIf="nombreContactoCtrl.invalid && (nombreContactoCtrl.dirty || nombreContactoCtrl.touched)" class="text-red-500 text-sm mt-1">
                <div *ngIf="nombreContactoCtrl.errors?.['required']">El nombre es obligatorio.</div>
                <div *ngIf="nombreContactoCtrl.errors?.['maxlength']">No debe exceder los 50 caracteres.</div>
                <div *ngIf="nombreContactoCtrl.errors?.['pattern']">Solo se permiten letras y espacios.</div>
              </div>
            </div>

            <!-- Número empresa -->
            <div class="mb-4">
              <label for="telefono" class="block text-sm font-medium mb-1 text-left" style="color: #670305;">
                Número de la empresa <span style="color: #670305;">*</span>
              </label>
              <input
                type="text"
                id="telefono"
                name="telefono"
                maxlength="9"
                pattern="^\d{4}\s\d{4}$"
                [(ngModel)]="proveedorForm.telefono"
                #telefonoCtrl="ngModel"
                required
                [class.bg-gray-100]="modoVer"
                class="rounded w-full py-2 px-3 focus:outline-none focus:ring-1"
                style="border: 1px solid #070826; color: #670305;"
                placeholder="0000 0000"
              />
              <div *ngIf="telefonoCtrl.invalid && (telefonoCtrl.dirty || telefonoCtrl.touched)" class="text-red-500 text-sm mt-1">
                <div *ngIf="telefonoCtrl.errors?.['required']">El número es obligatorio.</div>
                <div *ngIf="telefonoCtrl.errors?.['pattern']">Debe tener el formato 0000 0000.</div>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <!-- Número contacto -->
            <div class="mb-4">
              <label for="telefonoContacto" class="block text-sm font-medium mb-1 text-left" style="color: #670305;">
                Número del contacto <span style="color: #670305;">*</span>
              </label>
              <input
                type="text"
                id="telefonoContacto"
                name="telefonoContacto"
                maxlength="9"
                pattern="^\d{4}\s\d{4}$"
                [(ngModel)]="proveedorForm.telefonoContacto"
                #telefonoContactoCtrl="ngModel"
                required
                [class.bg-gray-100]="modoVer"
                class="rounded w-full py-2 px-3 focus:outline-none focus:ring-1"
                style="border: 1px solid #070826; color: #670305;"
                placeholder="0000 0000"
              />
              <div *ngIf="telefonoContactoCtrl.invalid && (telefonoContactoCtrl.dirty || telefonoContactoCtrl.touched)" class="text-red-500 text-sm mt-1">
                <div *ngIf="telefonoContactoCtrl.errors?.['required']">El número es obligatorio.</div>
                <div *ngIf="telefonoContactoCtrl.errors?.['pattern']">Debe tener el formato 0000 0000.</div>
              </div>
            </div>

            <!-- Dirección -->
            <div class="mb-4">
              <label for="direccion" class="block text-sm font-medium mb-1 text-left" style="color: #670305;">
                Dirección de la empresa <span style="color: #670305;">*</span>
              </label>
              <input
                type="text"
                id="direccion"
                name="direccion"
                maxlength="500"
                [(ngModel)]="proveedorForm.direccion"
                #direccionCtrl="ngModel"
                required
                [class.bg-gray-100]="modoVer"
                class="rounded w-full py-2 px-3 focus:outline-none focus:ring-1"
                style="border: 1px solid #070826; color: #670305;"
                placeholder="Ejemplo: Calle Falsa 123"
              />
              <div *ngIf="direccionCtrl.invalid && (direccionCtrl.dirty || direccionCtrl.touched)" class="text-red-500 text-sm mt-1">
                <div *ngIf="direccionCtrl.errors?.['required']">La dirección es obligatoria.</div>
                <div *ngIf="direccionCtrl.errors?.['maxlength']">No debe exceder los 500 caracteres.</div>
              </div>
            </div>

            <!-- Email -->
            <div class="mb-4">
              <label for="correo" class="block text-sm font-medium mb-1 text-left" style="color: #670305;">
                Email de la empresa
              </label>
              <input
                type="email"
                id="correo"
                name="correo"
                maxlength="100"
                [(ngModel)]="proveedorForm.correo"
                #correoCtrl="ngModel"
                [class.bg-gray-100]="modoVer"
                class="rounded w-full py-2 px-3 focus:outline-none focus:ring-1"
                style="border: 1px solid #070826; color: #670305;"
                placeholder="ejemplo@correo.com"
              />
              <div *ngIf="correoCtrl.invalid && (correoCtrl.dirty || correoCtrl.touched)" class="text-red-500 text-sm mt-1">
                <div *ngIf="correoCtrl.errors?.['email']">Debe ser un correo válido.</div>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <!-- Estado -->
            <div class="mb-4">
              <label for="estado" class="block text-sm font-medium mb-1 text-left" style="color: #670305;">
                Estado <span style="color: #670305;">*</span>
              </label>
              <select
                id="estado"
                name="estado"
                [(ngModel)]="proveedorForm.estado"
                #estadoCtrl="ngModel"
                required
                [disabled]="modoVer"
                class="rounded w-full py-2 px-3 focus:outline-none focus:ring-1"
                style="border: 1px solid #070826; color: #670305;"
              >
                <option value="" disabled>Seleccione estado</option>
                <option value="Activo">Activo</option>
                <option value="Inactivo">Inactivo</option>
              </select>
              <div *ngIf="estadoCtrl.invalid && (estadoCtrl.dirty || estadoCtrl.touched)" class="text-red-500 text-sm mt-1">
                Estado es obligatorio.
              </div>
            </div>
          </div>
        </fieldset>

        <div class="mt-6 flex justify-end space-x-3">
          <button
            type="button"
            (click)="cerrarModal.emit()"
            class="px-4 py-2 border border-gray-300 rounded-md text-white bg-[#B40001] hover:bg-[#9b0000]">
            Cancelar
          </button>

          <button
            *ngIf="!modoVer"
            type="submit"
            [disabled]="proveedorFormNg.invalid"
            class="px-4 py-2 border border-transparent rounded-md shadow-sm text-white bg-[#070826] hover:bg-[#05061c] disabled:opacity-50 disabled:cursor-not-allowed">
            Guardar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

